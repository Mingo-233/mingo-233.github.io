var h=Object.defineProperty;var c=(r,e,s)=>e in r?h(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var t=(r,e,s)=>(c(r,typeof e!="symbol"?e+"":e,s),s);import{d,B as m,H as u,S as l,C as p,R as w,t as g,q as n,r as o,e as a,A as x,P as b}from"./index-606c6e35.js";import{t as v}from"./tweakpane-6ffcf4ab.js";import{d as _,h as z,l as B,c as f,o as y,a as M}from"./index-2256cc31.js";import"./LoadingCreator-e47e8c93.js";import"./_plugin-vue_export-helper-c27b6911.js";class T{constructor(e){t(this,"basic");t(this,"scene");t(this,"camera");t(this,"renderer");t(this,"controls");t(this,"sizes");t(this,"useShader",!0);t(this,"clock");t(this,"helper");t(this,"debug");t(this,"resources");t(this,"emitter");t(this,"option");t(this,"material");t(this,"earthBox");t(this,"moonBox");this.option=e,this.emitter=new d.EventEmitter,this.basic=new m(e.dom),this.scene=this.basic.scene,this.renderer=this.basic.renderer,this.controls=this.basic.controls,this.camera=this.basic.camera,this.helper=new u(this.scene),this.sizes=new l(this),this.clock=new p,this.debug=new v.Pane({title:"🎉 mingo 🎉",expanded:!0}),this.resources=new w({hdrTexture:[{name:"hdrTexture",path:"http://oss.mingo.wang/webgl-lib/hdr/sky.hdr"}]},()=>{this.initialize(),console.log("资源加载完成",this.resources),this.createLight(),this.createBox(),this.createBox2(),this.controls.update(),this.render()})}initialize(){let e=this.resources.hdrTexture.hdrTexture;e.mapping=g,this.scene.background=e,this.scene.environment=e,this.camera.position.set(100,50,400),this.renderer.shadowMap.enabled=!0,this.emitter.on("resize",()=>{this.renderer.setSize(Number(this.sizes.viewport.width),Number(this.sizes.viewport.height)),this.camera.aspect=Number(this.sizes.viewport.width)/Number(this.sizes.viewport.height),this.camera.updateProjectionMatrix()})}createBox(){const e=new n(70,32,16),s=new o({color:16777215,reflectivity:1,envMap:this.resources.hdrTexture.hdrTexture}),i=new a(e,s);this.scene.add(i)}createBox2(){const e=new n(40,32,16),s=new o({color:16620354,reflectivity:.8,envMap:this.resources.hdrTexture.hdrTexture}),i=new a(e,s);i.position.set(130,0,0),this.scene.add(i)}createLight(){const e=new x(4210752,1);this.scene.add(e);const s=new b(16777215,2,0);s.position.set(200,400,15),this.scene.add(s)}destory(){this.debug.dispose()}render(){requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}}const k=M("div",{id:"threejs-canvas"},null,-1),L=[k],A=_({__name:"index",setup(r){let e;return z(()=>{const s=document.querySelector("#threejs-canvas");e=new T({dom:s})}),B(()=>{e.destory()}),(s,i)=>(y(),f("div",null,L))}});export{A as default};
